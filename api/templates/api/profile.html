{% load static %}

{% block content %}

<!doctype html>
<html lang="en">

  <head>
    {% include "api/include/tags.html" %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/profile.css' %}">

    <title>{{ user_account_info.name }} | SummonerStats</title>
  </head>

  <body>
    {% include "api/include/navbar.html" %}

    {% if user_account_info.user_not_found %}
      <main>
        <h2>Oh no! We couldn't find summoner "{{ user_account_info.name }}"</h2>
        <h4>Please double check your spelling or the region selected</h4>
      </main>

    {% elif user_account_info.success %}

      <main>

        <div class="container">

          <div class="d-flex justify-content-around pt-4 pb-1 mb-5" style="align-items: center">

            <div class="icon position-relative">
              <img class="border border-secondary" style="border-radius: 20%; max-width: 100%; height: 6.5em" src="https://raw.communitydragon.org/latest/game/assets/ux/summonericons/profileicon{{ user_account_info.profileIconId }}.png">
              <span class="position-absolute top-0 start-50 translate-middle badge bg-dark text-bg-primary border border-secondary">{{ user_account_info.summonerLevel }}</span>
              <div style="color:white; text-align: center; font-size: 1em;"><strong>{{ user_account_info.name }}</strong> </div>   
            </div>

            <div class="stats-box rounded-2">
              <strong><span style="color: white; text-align: center; font-size: 1.2em;">Ranked Solo</span></strong>
              <hr>
              {% if ranked_data.RANKED_SOLO_5x5.tier == "Unranked" %}
                <span class="rank-img" style="display:inline-block"><img style="height: 3em;" src="https://raw.communitydragon.org/latest/plugins/rcp-fe-lol-static-assets/global/default/images/ranked-mini-crests/unranked.png"></span>
                <strong>UNRANKED</strong>
              {% else %}
                <span><img class="rank-img" src="https://raw.communitydragon.org/latest/plugins/rcp-fe-lol-static-assets/global/default/images/ranked-mini-crests/{{ ranked_data.RANKED_SOLO_5x5.tier|lower }}.png"> </span>
                <span style="white-space: pre"><strong class="fs-6">{{ ranked_data.RANKED_SOLO_5x5.tier }} {{ ranked_data.RANKED_SOLO_5x5.rank }}   {{ ranked_data.RANKED_SOLO_5x5.leaguePoints }} LP </strong>   {{ ranked_data.RANKED_SOLO_5x5.wins }}-{{ ranked_data.RANKED_SOLO_5x5.losses }}   {{ ranked_data.RANKED_SOLO_5x5.win_rate }}% WR </span>
              {% endif %}
            </div>
            
            <div class="stats-box rounded-2">
              <strong><span style="color: white; text-align: center; font-size: 1.2em;">Ranked Flex</span></strong>
              <hr>

              {% if ranked_data.RANKED_FLEX_SR.tier == "Unranked" %}
                <span class="rank-img" style="display:inline-block"><img style="height: 3em;" src="https://raw.communitydragon.org/latest/plugins/rcp-fe-lol-static-assets/global/default/images/ranked-mini-crests/unranked.png"></span>
                <strong>UNRANKED</strong>
              {% else %}
                <span><img class="rank-img" src="https://raw.communitydragon.org/latest/plugins/rcp-fe-lol-static-assets/global/default/images/ranked-mini-crests/{{ ranked_data.RANKED_FLEX_SR.tier|lower }}.png"></span>
                <span style="white-space: pre"><strong class="fs-6">{{ ranked_data.RANKED_FLEX_SR.tier }} {{ ranked_data.RANKED_FLEX_SR.rank }}   {{ ranked_data.RANKED_FLEX_SR.leaguePoints }} LP </strong>   {{ ranked_data.RANKED_FLEX_SR.wins }}-{{ ranked_data.RANKED_FLEX_SR.losses }}   {{ ranked_data.RANKED_FLEX_SR.win_rate }}% WR </span>
              {% endif %}

            </div>
          </div>

          <div class="row justify-content-around">

            <div class="col-4">
              
              <div class="stats">
                <span data-bs-toggle="tooltip" data-bs-placement="right" title="Stats based on {{ summoner_db.games }} game{{ summoner_db.games|pluralize }}" style="float: right; margin-right: 2rem; font-size: 1rem;">
                <i class="bi bi-info-circle-fill"></i>
                </span>
                <div class="container d-flex align-items-center justify-content-center">
                  <i class="bi bi-collection-fill" style="font-size: 1.5rem; margin-right: 2rem"></i> <span class="fs-3">CHAMPIONS</span> <i class="bi bi-collection-fill" style="font-size: 1.5rem; margin-left: 2rem"></i>
                </div>

                <div class="bars d-flex justify-content-around">
                  <div class="progress-role">
                    <div class="progress progress-bar-vertical" data-bs-toggle="tooltip" data-bs-placement="right" title="{{ summoner_db.roles.TOP.WINS }} - {{ summoner_db.roles.TOP.LOSSES }} / {{summoner_db.roles.TOP.WIN_RATE}}%">
                      <div class="progress-bar" role="progressbar" aria-valuenow="{{summoner_db.roles.TOP.WIN_RATE}}" aria-valuemin="0" aria-valuemax="100" style="height: {{summoner_db.roles.TOP.WIN_RATE}}%"> </div>
                    </div>
                    <img class="bar-role-img" src="https://raw.communitydragon.org/latest/plugins/rcp-fe-lol-clash/global/default/assets/images/position-selector/positions/icon-position-top.png">
                    <div class="text-center">{{summoner_db.roles.TOP.NUM}}</div>
                  </div>
                  
                  <div class="progress-role">
                    <div class="progress progress-bar-vertical" data-bs-toggle="tooltip" data-bs-placement="right" title="{{ summoner_db.roles.JUNGLE.WINS }} - {{ summoner_db.roles.JUNGLE.LOSSES }} / {{summoner_db.roles.JUNGLE.WIN_RATE}}%">
                      <div class="progress-bar" role="progressbar" aria-valuenow="{{summoner_db.roles.JUNGLE.WIN_RATE}}" aria-valuemin="0" aria-valuemax="100" style="height: {{summoner_db.roles.JUNGLE.WIN_RATE}}%"> </div>
                    </div>
                    <img class="bar-role-img" src="https://raw.communitydragon.org/latest/plugins/rcp-fe-lol-clash/global/default/assets/images/position-selector/positions/icon-position-jungle.png">
                    <div class="text-center">{{summoner_db.roles.JUNGLE.NUM}}</div>
                  </div>

                  <div class="progress-role">
                    <div class="progress progress-bar-vertical" data-bs-toggle="tooltip" data-bs-placement="right" title="{{ summoner_db.roles.MIDDLE.WINS }} - {{ summoner_db.roles.MIDDLE.LOSSES }} / {{summoner_db.roles.MIDDLE.WIN_RATE}}%">
                      <div class="progress-bar" role="progressbar" aria-valuenow="{{summoner_db.roles.MIDDLE.WIN_RATE}}" aria-valuemin="0" aria-valuemax="100" style="height: {{summoner_db.roles.MIDDLE.WIN_RATE}}%"> </div>
                    </div>
                    <img class="bar-role-img" src="https://raw.communitydragon.org/latest/plugins/rcp-fe-lol-clash/global/default/assets/images/position-selector/positions/icon-position-middle.png">
                    <div class="text-center">{{summoner_db.roles.MIDDLE.NUM}}</div>
                  </div>

                  <div class="progress-role">
                    <div class="progress progress-bar-vertical" data-bs-toggle="tooltip" data-bs-placement="right" title="{{ summoner_db.roles.BOTTOM.WINS }} - {{ summoner_db.roles.BOTTOM.LOSSES }} / {{summoner_db.roles.BOTTOM.WIN_RATE}}%">
                      <div class="progress-bar" role="progressbar" aria-valuenow="{{summoner_db.roles.BOTTOM.WIN_RATE}}" aria-valuemin="0" aria-valuemax="100" style="height: {{summoner_db.roles.BOTTOM.WIN_RATE}}%"> </div>
                    </div>
                    <img class="bar-role-img" src="https://raw.communitydragon.org/latest/plugins/rcp-fe-lol-clash/global/default/assets/images/position-selector/positions/icon-position-bottom.png">
                    <div class="text-center">{{summoner_db.roles.BOTTOM.NUM}}</div>
                  </div>

                  <div class="progress-role">
                    <div class="progress progress-bar-vertical" data-bs-toggle="tooltip" data-bs-placement="right" title="{{ summoner_db.roles.UTILITY.WINS }} - {{ summoner_db.roles.UTILITY.LOSSES }} / {{summoner_db.roles.UTILITY.WIN_RATE}}%">
                      <div class="progress-bar" role="progressbar" aria-valuenow="{{summoner_db.roles.UTILITY.WIN_RATE}}" aria-valuemin="0" aria-valuemax="100" style="height: {{summoner_db.roles.UTILITY.WIN_RATE}}%"> </div>
                    </div>
                    <img class="bar-role-img" src="https://raw.communitydragon.org/latest/plugins/rcp-fe-lol-clash/global/default/assets/images/position-selector/positions/icon-position-utility.png">
                    <div class="text-center">{{summoner_db.roles.UTILITY.NUM}}</div>
                  </div>
                </div>

                <table class="table table-sm table-striped text-center">
                  <thead>
                    <tr>
                      <th scope="col">STAT</th>
                      <th scope="col">TOTAL</th>
                      <th scope="col">PER MIN</th>
                      <th scope="col">AVG</th>

                  </thead>
                  <tbody>
                    <tr>
                      <td>Kills</td>
                      <td>{{summoner_db.stats.kills.total}}</td>
                      <td>{{summoner_db.stats.kills.per_min}}</td>
                      <td>{{summoner_db.stats.kills.per_game}}</td>
                    </tr>
                    <tr>
                      <td>Deaths</td>
                      <td>{{summoner_db.stats.deaths.total}}</td>
                      <td>{{summoner_db.stats.deaths.per_min}}</td>
                      <td>{{summoner_db.stats.deaths.per_game}}</td>
                    </tr>
                    <tr>
                      <td>Assists</td>
                      <td>{{summoner_db.stats.assists.total}}</td>
                      <td>{{summoner_db.stats.assists.per_min}}</td>
                      <td>{{summoner_db.stats.assists.per_game}}</td>
                    </tr>
                    <tr>
                      <td>Minions</td>
                      <td>{{summoner_db.stats.minions.total}}</td>
                      <td>{{summoner_db.stats.minions.per_min}}</td>
                      <td>{{summoner_db.stats.minions.per_game}}</td>
                    </tr>
                    <tr>
                      <td>Vision</td>
                      <td>{{summoner_db.stats.vision.total}}</td>
                      <td>{{summoner_db.stats.vision.per_min}}</td>
                      <td>{{summoner_db.stats.vision.per_game}}</td>
                    </tr>
                  <tbody>
                </table>

              </div>

              <div class="champions">
                <span data-bs-toggle="tooltip" data-bs-placement="right" title="Stats based on {{ summoner_db.games }} game{{ summoner_db.games|pluralize }}" style="float: right; margin-right: 2rem; font-size: 1rem;">
                  <i class="bi bi-info-circle-fill"></i>
                  </span>
                <div class="container d-flex align-items-center justify-content-center">
                  <i class="bi bi-bar-chart-fill" style="font-size: 1.5rem; margin-right: 2rem"></i> <span class="fs-3">STATS</span> <i class="bi bi-bar-chart-fill" style="font-size: 1.5rem; margin-left: 2rem"></i>
                </div>


                <table class="table table-sm table-striped text-center">
                  <thead>
                    <tr>
                      <th scope="col"></th>
                      <th scope="col">CHAMP</th>
                      <th scope="col">GAMES</th>
                      <th scope="col">WR</th>
                      <th scope="col">KDA</th>
                  </thead>
                  <tbody>
                    {% for champion, stats in summoner_db.champions.items %}
                      <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>{{champion}}</td>
                        <td>{{stats.num}}</td>
                        <td>{{stats.win_rate}}</td>
                        <td>{{stats.kda}}</td>
                      </tr>
                    {% endfor %}
                  <tbody>
                </table>
              
              </div>
            </div>

            <div class="col-md-8">
              {% include "api/include/games.html" %}
      
              <!-- Twitter-style Pagination -->
              {% block js %}
              <script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>
              <script src="{% static 'js/el-pagination.js' %}"></script>
              <script>
                $.endlessPaginate({
                    paginateOnScroll: true,
                    paginateOnScrollMargin: 20
                });
              </script>
              {% endblock %}
              <!-- Twitter-style Pagination -->
            </div>

          </div>

        </div>

      </main>
    {% endif %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <script src="{% static 'js/load-game-data.js' %}"></script>
    <script>
      var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
      })
    </script>
  </body>

</html>

{% endblock %}